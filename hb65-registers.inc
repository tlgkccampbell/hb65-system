.IFNDEF _INCLUDE_REGISTERS_
_INCLUDE_REGISTERS_ = 1

.INCLUDE    "hb65-config.inc"

.IMPORT     __REGISTERS_START__

; Register space constants
 SYSDEF_REGISTERS := __REGISTERS_START__ + $00
  PDEV0_REGISTERS := __REGISTERS_START__ + $10
  PDEV1_REGISTERS := __REGISTERS_START__ + $20
  PDEV2_REGISTERS := __REGISTERS_START__ + $30
  PDEV3_REGISTERS := __REGISTERS_START__ + $40
  RDEV0_REGISTERS := __REGISTERS_START__ + $50
  RDEV1_REGISTERS := __REGISTERS_START__ + $60
DECODER_REGISTERS := __REGISTERS_START__ + $70

; DEFINE_REGISTERS macro
; Defines the specified label and sets its value to the start of the specified
; device's register space, based on the device assignments in hb65-config.inc.
; If the device is not present in the system configuration, the label is not defined.
.MACRO DEFINE_REGISTERS label, device
  .IFDEF device
    .IF device = DEVICE_LOCATIONS::RDEV0
      label := RDEV0_REGISTERS
    .ELSEIF device = DEVICE_LOCATIONS::RDEV1
      label := RDEV1_REGISTERS
    .ELSEIF device = DEVICE_LOCATIONS::PDEV0
      label := PDEV0_REGISTERS
    .ELSEIF device = DEVICE_LOCATIONS::PDEV1
      label := PDEV1_REGISTERS
    .ELSEIF device = DEVICE_LOCATIONS::PDEV2
      label := PDEV2_REGISTERS
    .ELSEIF device = DEVICE_LOCATIONS::PDEV3
      label := PDEV3_REGISTERS
    .ENDIF
  .ENDIF
.ENDMACRO

; Address decoder
DECODER_DCR := DECODER_REGISTERS + $00
DECODER_SCR := DECODER_REGISTERS + $01
DECODER_AFR := DECODER_REGISTERS + $02
DECODER_MLR := DECODER_REGISTERS + $03
DECODER_RLR := DECODER_REGISTERS + $04
DECODER_WBR := DECODER_REGISTERS + $05

; System, Type A
.IF CFG_SYS_CARD = SYSTEM_CARDS::TYPE_A
SYSTEM_VIA_REGISTERS := SYSDEF_REGISTERS
SYSTEM_VIA_ORB       := SYSTEM_VIA_REGISTERS + $00   ; ORB
SYSTEM_VIA_IRB       := SYSTEM_VIA_ORB               ; IRB
SYSTEM_VIA_ORA       := SYSTEM_VIA_REGISTERS + $01   ; ORA
SYSTEM_VIA_IRA       := SYSTEM_VIA_ORA               ; IRA
SYSTEM_VIA_DDRB      := SYSTEM_VIA_REGISTERS + $02   ; DDRB
SYSTEM_VIA_DDRA      := SYSTEM_VIA_REGISTERS + $03   ; DDRA
SYSTEM_VIA_T1CL      := SYSTEM_VIA_REGISTERS + $04   ; T1CL
SYSTEM_VIA_T1CH      := SYSTEM_VIA_REGISTERS + $05   ; T1CH
SYSTEM_VIA_T1LL      := SYSTEM_VIA_REGISTERS + $06   ; T1LL
SYSTEM_VIA_T1LH      := SYSTEM_VIA_REGISTERS + $07   ; T1LH
SYSTEM_VIA_T2CL      := SYSTEM_VIA_REGISTERS + $08   ; T2CL
SYSTEM_VIA_T2CH      := SYSTEM_VIA_REGISTERS + $09   ; T2CH
SYSTEM_VIA_SR        := SYSTEM_VIA_REGISTERS + $0A   ; SR
SYSTEM_VIA_ACR       := SYSTEM_VIA_REGISTERS + $0B   ; ACR
SYSTEM_VIA_PCR       := SYSTEM_VIA_REGISTERS + $0C   ; PCR
SYSTEM_VIA_IFR       := SYSTEM_VIA_REGISTERS + $0D   ; IFR
SYSTEM_VIA_IER       := SYSTEM_VIA_REGISTERS + $0E   ; IER
.ENDIF

; Video card
DEFINE_REGISTERS VPU_REGISTERS, CFG_DEVICE_VPU

.IF .DEF(VPU_REGISTERS)
VPU_VSR     := VPU_REGISTERS + $00   ; VSR
VPU_BSR     := VPU_REGISTERS + $01   ; BSR
VPU_HSUCR   := VPU_REGISTERS + $02   ; HSCUR
VPU_HSUVR   := VPU_REGISTERS + $03   ; HSCVR
.ENDIF

; ACIA UART
DEFINE_REGISTERS ACIA_REGISTERS, CFG_DEVICE_ACIA

.IF .DEF(ACIA_REGISTERS)
ACIA_DATA    := ACIA_REGISTERS + $00  ; DATA
ACIA_STATUS  := ACIA_REGISTERS + $01  ; STATUS
ACIA_CMD     := ACIA_REGISTERS + $02  ; CMD
ACIA_CTRL    := ACIA_REGISTERS + $03  ; CTRL
.ENDIF

.ENDIF